══════════════════════════════════════════════════════════════════
            📂 ESTRUTURA DO SISTEMA NAIPER'S CLUB                
══════════════════════════════════════════════════════════════════

🎯 OBJETIVO:
Entender como o sistema está organizado e o que cada parte faz.

══════════════════════════════════════════════════════════════════

📁 VISÃO GERAL:

naipers-club-final/
│
├── 🌐 FRONTEND (Usuário)
│   ├── index.html
│   ├── assets/
│   └── favicon.png
│
├── 🔐 ADMIN (Dashboard)
│   └── admin/
│       └── index.html
│
├── 🔧 BACKEND (PHP)
│   └── api/
│       ├── sessions.php
│       ├── sessions-id.php
│       ├── tracking.php
│       ├── quiz-responses.php
│       ├── analytics.php
│       └── auth/
│
├── ⚙️ CONFIGURAÇÃO
│   ├── config/
│   └── includes/
│
├── 📄 ARQUIVOS IMPORTANTES
│   ├── .htaccess
│   └── schema_mysql.sql
│
└── 📚 DOCUMENTAÇÃO
    └── docs/

══════════════════════════════════════════════════════════════════

🌐 ÁREA DO USUÁRIO (Quiz Funnel):

┌──────────────────────────────────────────────────────────────┐
│ 📄 index.html                                                │
├──────────────────────────────────────────────────────────────┤
│ • Página principal do quiz                                   │
│ • Carrega React SPA compilado                                │
│ • Background preto com design moderno                        │
│ • Responsivo mobile/tablet/desktop                           │
│                                                              │
│ FLUXO DO USUÁRIO:                                           │
│ 1. Hero → Botão "Sim, com certeza!"                        │
│ 2. Quiz → 5 perguntas interativas                          │
│ 3. Formulário → Captura nome, email, telefone             │
│ 4. Success → Página de confirmação + botão comprar        │
└──────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────┐
│ 📁 assets/                                                   │
├──────────────────────────────────────────────────────────────┤
│ • CSS compilado e otimizado (13 KB gzip)                    │
│ • JavaScript React (170 KB gzip)                            │
│ • Imagens (logo, hero)                                      │
│ • Tudo minificado para performance                          │
└──────────────────────────────────────────────────────────────┘

══════════════════════════════════════════════════════════════════

🔐 ÁREA ADMIN (Dashboard):

┌──────────────────────────────────────────────────────────────┐
│ 📁 admin/index.html                                          │
├──────────────────────────────────────────────────────────────┤
│ • Dashboard de analytics                                     │
│ • Protegido com autenticação                                │
│ • Mesma SPA React, rota /admin                              │
│                                                              │
│ ACESSO:                                                      │
│ • URL: https://seudominio.com/admin                         │
│ • User: admin                                               │
│ • Pass: (configurada em config/database.php)               │
│                                                              │
│ FUNCIONALIDADES:                                            │
│ • Total de visitantes/sessões                              │
│ • Total de page views                                       │
│ • Leads capturados (formulário)                            │
│ • Cliques no botão "Comprar"                               │
│ • Funil de conversão visual                                │
│ • Distribuição de respostas                                │
│ • Tabela de leads recentes                                 │
│ • Análise de exit points                                   │
└──────────────────────────────────────────────────────────────┘

══════════════════════════════════════════════════════════════════

🔧 BACKEND (API PHP):

┌──────────────────────────────────────────────────────────────┐
│ 📁 api/                                                      │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│ PÚBLICOS (Não precisam login):                             │
│                                                              │
│ • sessions.php                                              │
│   POST /api/sessions                                        │
│   → Criar nova sessão de tracking                          │
│   → Retorna: {id: "uuid"}                                  │
│                                                              │
│ • sessions-id.php                                           │
│   PATCH /api/sessions/{id}                                 │
│   → Atualizar flags (completedQuiz, clickedBuy)           │
│   → Body: {completedQuiz: 1} ou {clickedBuy: 1}          │
│                                                              │
│ • tracking.php                                              │
│   POST /api/tracking                                        │
│   → Salvar evento de tracking                              │
│   → Body: {sessionId, eventType, stepNumber, answerId}    │
│                                                              │
│ • quiz-responses.php                                        │
│   POST /api/quiz-responses                                 │
│   → Salvar resposta do quiz + dados de contato            │
│   → Body: {name, email, phone, answer1-3, sessionId}      │
│                                                              │
│ PROTEGIDOS (Precisam estar logado):                        │
│                                                              │
│ • analytics.php                                             │
│   GET /api/analytics                                        │
│   → Retorna todas as métricas do dashboard                │
│                                                              │
│ • quiz-responses.php                                        │
│   GET /api/quiz-responses                                  │
│   → Lista todos os leads capturados                        │
│                                                              │
│ • tracking.php                                              │
│   GET /api/tracking                                         │
│   → Lista todos os eventos de tracking                     │
└──────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────┐
│ 📁 api/auth/                                                 │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│ • login.php                                                 │
│   POST /api/auth/login                                      │
│   → Fazer login de admin                                   │
│   → Body: {username, password}                             │
│   → Cria sessão PHP                                        │
│                                                              │
│ • logout.php                                                │
│   POST /api/auth/logout                                     │
│   → Fazer logout                                           │
│   → Destroi sessão PHP                                     │
│                                                              │
│ • status.php                                                │
│   GET /api/auth/status                                      │
│   → Verificar se está autenticado                         │
│   → Retorna: {isAuthenticated: true/false}                │
└──────────────────────────────────────────────────────────────┘

══════════════════════════════════════════════════════════════════

⚙️ CONFIGURAÇÃO:

┌──────────────────────────────────────────────────────────────┐
│ 📁 config/database.php                                       │
├──────────────────────────────────────────────────────────────┤
│ 🔴 ARQUIVO MAIS IMPORTANTE! EDITE AQUI!                     │
│                                                              │
│ CONTÉM:                                                      │
│ • Credenciais MySQL (host, banco, user, senha)             │
│ • Credenciais de admin (username, password hash)           │
│ • Função de conexão PDO                                    │
│ • Função generateUUID()                                    │
│                                                              │
│ SEGURANÇA:                                                  │
│ • Senhas com bcrypt (password_hash)                        │
│ • Nunca compartilhar este arquivo                          │
│ • Fazer backup em local seguro                             │
└──────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────┐
│ 📁 includes/auth.php                                         │
├──────────────────────────────────────────────────────────────┤
│ FUNÇÕES AUXILIARES:                                         │
│                                                              │
│ • setCORSHeaders() - Headers CORS                          │
│ • sendJSON() - Enviar resposta JSON                        │
│ • getJSONInput() - Ler body JSON                           │
│ • requireAdmin() - Middleware de auth                      │
│                                                              │
│ Usado por todos os endpoints da API                        │
└──────────────────────────────────────────────────────────────┘

══════════════════════════════════════════════════════════════════

📄 ARQUIVOS IMPORTANTES:

┌──────────────────────────────────────────────────────────────┐
│ .htaccess                                                    │
├──────────────────────────────────────────────────────────────┤
│ ROUTING DO APACHE:                                          │
│                                                              │
│ • PATCH /api/sessions/{id} → sessions-id.php              │
│ • /api/auth/* → api/auth/*.php                             │
│ • /api/* → api/*.php                                       │
│ • /* → index.html (SPA routing)                            │
│                                                              │
│ SEGURANÇA:                                                  │
│ • Proteção de config/ e includes/                          │
│ • Headers de segurança                                     │
│ • Compressão gzip                                          │
│ • Cache de assets                                          │
│                                                              │
│ PRODUÇÃO:                                                   │
│ • Descomentar linhas de HTTPS forçado                      │
└──────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────┐
│ schema_mysql.sql                                             │
├──────────────────────────────────────────────────────────────┤
│ BANCO DE DADOS (3 Tabelas):                                 │
│                                                              │
│ 1. sessions                                                 │
│    • id (UUID)                                             │
│    • started_at                                            │
│    • last_activity_at                                      │
│    • completed_quiz (0/1)                                  │
│    • clicked_buy (0/1)                                     │
│                                                              │
│ 2. tracking_events                                          │
│    • id (UUID)                                             │
│    • session_id (FK)                                       │
│    • event_type (page_view, answer_click, etc)            │
│    • step_number (0-7)                                     │
│    • answer_id                                             │
│    • metadata (JSON)                                       │
│    • created_at                                            │
│                                                              │
│ 3. quiz_responses                                           │
│    • id (UUID)                                             │
│    • session_id (FK)                                       │
│    • name                                                  │
│    • email                                                 │
│    • phone                                                 │
│    • answer1, answer2, answer3                            │
│    • created_at                                            │
│                                                              │
│ ÍNDICES:                                                    │
│ • session_id em tracking_events                           │
│ • session_id em quiz_responses                            │
│ • created_at em todas as tabelas                          │
└──────────────────────────────────────────────────────────────┘

══════════════════════════════════════════════════════════════════

🔄 FLUXO DE DADOS:

1. USUÁRIO ENTRA NO SITE
   → Frontend carrega (index.html)
   → JavaScript faz POST /api/sessions
   → Recebe sessionId único
   → Salva no localStorage

2. USUÁRIO NAVEGA NO QUIZ
   → Cada ação dispara POST /api/tracking
   → Eventos salvos: page_view, answer_click, etc
   → sessionId vincula tudo ao mesmo visitante

3. USUÁRIO RESPONDE QUIZ
   → Escolhe respostas (answer1, answer2, answer3)
   → Armazenado no React state
   → Enviado junto com dados pessoais

4. USUÁRIO PREENCHE FORMULÁRIO
   → Valida campos (Zod)
   → POST /api/quiz-responses
   → Salva: nome, email, telefone + respostas
   → Dispara tracking: form_submit
   → PATCH /api/sessions/{id} → completedQuiz = 1

5. USUÁRIO CLICA "COMPRAR"
   → Dispara tracking: buy_click
   → PATCH /api/sessions/{id} → clickedBuy = 1
   → Abre link do checkout Ticto

6. ADMIN ACESSA DASHBOARD
   → Login em /admin
   → POST /api/auth/login
   → Sessão PHP criada
   → GET /api/analytics
   → Mostra métricas em tempo real

══════════════════════════════════════════════════════════════════

🎨 DESIGN DO SISTEMA:

┌──────────────────────────────────────────────────────────────┐
│ PALETA DE CORES:                                            │
├──────────────────────────────────────────────────────────────┤
│ • Background: #000000 (Preto)                               │
│ • Dourado: #FFD700 (Destaques, CTAs)                       │
│ • Azul: #1E90FF (Ícones, estrelas)                         │
│ • Branco: #FFFFFF (Textos)                                 │
│ • Verde: Green-500 (Botão comprar)                         │
└──────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────┐
│ RESPONSIVIDADE:                                             │
├──────────────────────────────────────────────────────────────┤
│ • Mobile: < 640px (sm)                                      │
│ • Tablet: 640-768px (md)                                    │
│ • Desktop: > 768px (lg)                                     │
│                                                              │
│ Elementos escalam automaticamente!                          │
└──────────────────────────────────────────────────────────────┘

══════════════════════════════════════════════════════════════════

🔒 SEGURANÇA:

✅ Senha admin com bcrypt
✅ Validação de inputs (Zod)
✅ Prepared statements (SQL injection)
✅ CORS configurado
✅ Session management seguro
✅ Proteção de diretórios sensíveis
✅ HTTPS recomendado (produção)

══════════════════════════════════════════════════════════════════

📊 PERFORMANCE:

✅ CSS: 13 KB (gzip)
✅ JS: 170 KB (gzip)
✅ Assets minificados
✅ Compressão gzip ativa
✅ Cache de assets
✅ Queries otimizadas

══════════════════════════════════════════════════════════════════

✅ RESUMO:

Este sistema é:
• Completo (frontend + backend + banco)
• Seguro (auth, bcrypt, prepared statements)
• Rápido (build otimizado, gzip)
• Responsivo (mobile-first)
• Moderno (React, Tailwind, Framer Motion)
• Funcional (tracking completo, analytics)

Tudo em UMA PASTA ORGANIZADA! 🎉

══════════════════════════════════════════════════════════════════
